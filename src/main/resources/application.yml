spring:
  application:
    name: simple-file-service

  # 데이터소스 설정 (환경변수로 오버라이드 가능)
  datasource:
    url: ${SPRING_DATASOURCE_URL:jdbc:h2:mem:streamix;DB_CLOSE_DELAY=-1}
    driver-class-name: ${SPRING_DATASOURCE_DRIVER:org.h2.Driver}
    username: ${SPRING_DATASOURCE_USERNAME:sa}
    password: ${SPRING_DATASOURCE_PASSWORD:}

  # JPA 설정
  jpa:
    hibernate:
      ddl-auto: ${SPRING_JPA_DDL_AUTO:create-drop}
    show-sql: ${SPRING_JPA_SHOW_SQL:false}
    open-in-view: false
    properties:
      hibernate:
        format_sql: true

  # H2 Console (개발용)
  h2:
    console:
      enabled: ${H2_CONSOLE_ENABLED:true}
      path: /h2-console

  # 파일 업로드 설정
  servlet:
    multipart:
      max-file-size: ${MAX_FILE_SIZE:100MB}
      max-request-size: ${MAX_REQUEST_SIZE:100MB}

# Streamix 설정 (v2.0.0)
streamix:
  storage:
    base-path: ${STREAMIX_STORAGE_BASE_PATH:./streamix-data}
    # v2.0.0 신규: 최대 파일 크기 (바이트, 기본 100MB)
    max-file-size: ${STREAMIX_STORAGE_MAX_FILE_SIZE:104857600}
    # v2.0.0 신규: 허용 파일 타입 (빈 값 = 전체 허용)
    # 가능한 값: IMAGE, VIDEO, AUDIO, DOCUMENT, ARCHIVE, OTHER
    allowed-types: ${STREAMIX_STORAGE_ALLOWED_TYPES:}
  thumbnail:
    enabled: ${STREAMIX_THUMBNAIL_ENABLED:true}
    width: ${STREAMIX_THUMBNAIL_WIDTH:320}
    height: ${STREAMIX_THUMBNAIL_HEIGHT:180}
    ffmpeg-path: ${STREAMIX_THUMBNAIL_FFMPEG_PATH:ffmpeg}
  api:
    enabled: ${STREAMIX_API_ENABLED:true}
    base-path: ${STREAMIX_API_BASE_PATH:/api/streamix}
  dashboard:
    enabled: ${STREAMIX_DASHBOARD_ENABLED:true}
    path: ${STREAMIX_DASHBOARD_PATH:/streamix}

# Actuator 설정 (헬스체크)
management:
  endpoints:
    web:
      exposure:
        include: health,info
  endpoint:
    health:
      show-details: ${ACTUATOR_HEALTH_DETAILS:never}

# 서버 설정
server:
  port: ${SERVER_PORT:8080}